### ~~//设置界面 加一个显示隐藏~~

~~把所有可以玩家控制显示隐藏的界面放进去~~
~~（速度表，网络参数，玩家名字，特技奖励，~~<!--PHouse区域的textdraw等）-->

~~textdraw是可以设置rgba的也就是可以透明，意味着，如果可以的话，玩家可以传入textdraw的变量实参，然后实现动效，缓动等，包括textdraw的位置~~
~~但是有个问题，好像是没有方法获取textdraw的颜色等，设置后好像只能设置?~~
~~缓动参数可以参考易语言那个简单函数y+=（b-y）+c~~
~~y是坐标轴 b是目标值 c是参数，在（0,1）的取值范围，控制速度~~

<!--反m0d模仿玩家动作，就应该判断速度是不是没在开车，然后是不是某一段时间长期跟被模仿玩家面向angle角度一模一样，并且玩家的x轴，y轴任意一轴是固定朝向时则不判断-->

~~TDE textdraw编辑器~~
~~模仿吃鸡或者csgo 通过每秒减去上一秒获得玩家每秒上传kb数和下载kb数~~
~~以及丢包百分比~~
~~在设置中默认关闭，可手动开启~~。

### 传送改MYSQLR41

### npc实时录制/停止/删除/播放

根据uid创建npc录制，
数据库需要自增列id，皮肤id，编号（车辆或人物，根据数字范围判断），录制日期，录制人（uid），以及文件名
然后每个玩家指令调用时，通过uid去拿npc列表，进行操作。
玩家下线自动卸载玩家已经加载的npc
文件丢失则提示已失效

### 服务器定时系统

自动清理一个月没登录的玩家录制的npc文件
需要调用filemanage插件等越权操作scr目录的东西
同时加入npc和卸载npc需要动态增改服务器maxnpc数字限制，动态范围控制服务器npc人数，当然肯定是以玩家为首，所以要判断玩家总数进行调配npc数量并提示能否加载

如果这个做出来了 那就可以进阶，适配prace，实现赛道录像回放功能。
如果录像回放功能做出来了，那就可以做监管系统了（接入举报系统）
....无底洞啊

~~优化sz菜单返回问题，~~
~~增加镜头编辑的..嗯~~

~~镜头系统最好支持飞行模式flymode代替传统的飞行器或其他载具操控。~~
~~并且适配赛道，dm，死亡，tv，传送等操作进行自动关闭，防止反作弊~~
~~禁止在编辑模式下刷车~~
~~首镜头延时播放bug需要修改为无~~



微加速可以调用瞬时速度，反作弊每指定毫秒数进行运算，通过最快提速车辆的极限值加一点点偏差值的判断，进行判定。



~~修复一些textdraw 把速度表啊 比赛啊这种textdraw由global改成playertextdraw~~
~~然后声明变量那里 包括所有计时器 声明句柄timerid或者textdraw先都给-1~~
~~global上限2048个 根据目前服务器 至少已经3008个~~
~~playertextdraw为每个玩家最大支持256个，所以，这一类东西，能不用global就别用~~

### 离线/在线消息系统...

限制玩家在线时长发送

同时发送一次消息扣一点钱省的乱来

不过通过这个功能倒是可以发**系统公告**等了（**类型**）

这样就可以把重要的通知和更新内容发给玩家了

分已注册玩家和没有注册的玩家 注册完后也要去获取一遍系统公告列表然后读进来插入数据库

并且设置为未读

然后还要做**已读未读**？？？……（列名）

**回复**……？？？？（发送短信？）咋回复呢 对话框式的那种微信啊啥的做不出来的

**可通过设置开启textdraw显示与关闭。**
**通过设置开关接收玩家消息功能**（系统公告无法关闭）
点击消息系统则**按类型显示对话框**
以列表形式呈现用户名，uid和数量。
点击对应发送人进入后为列表式对话框，
包含标题和时间，进入后可看详细内容。
同样需要采用屏蔽特殊字系统。
用户可进行**删除**操作。

**举报系统** 举报内容违规，弹到管理员那边进行负责

*最好以后能够支持正则，这样就可以防止空格问题*

~~最好能够支持json这样子把玩家设置的内容全都方便读取写入~~
~~但是其实还不如直接数据库写，json其实更站文件大小吧~~

## 好友系统

...



### 等级系统

写完等级就可以写textdraw去绘制界面
显示经验金币等级时间分等信息了

<!--然后有空还可以写个信誉度-->
<!--信誉度会通过被封杀等行为减少-->
<!--通过在线时间和赛道次数补回或者就不加了-->

### 原版三栋大楼电梯系统考虑汉化



### 邀请和操作团队方面

变量优化
然后，在tab界面点击玩家下面加一个邀请加入团队，更方便管理。
如果有团队且是自己团队的人就加一个操作成员
并且在操作时每一步都要去验证他是否还在队内，不然会误操作（万一对方在你操作中途退队，理论上之前已经写好了）

### 赛道重生加spawnpos 会更好一些，在某些赛道下

### 下线保存玩家颜色

### *摄像机 保存玩家的镜头到db里*

*这样下线还可以调用*
*就是不用支持序列（顺序创建就已经很可以了）*

### 家具购买系统

---

### 爱车购买系统

---

### 礼物🎁系统

---

### 签到系统

可以画个textdraw然后可点击
上面塞个model模型 模型用obj看哪个像盒子或者问号啥的
可以抽钱啊或者经验卡啥的

草那就得做背包系统了



***封号记录如果可以的话改用db 最好是mysql***
*配上时间uid其实会更好一些*

---

### 举报系统（仲裁系统）

参考B站小黑屋和CSGO OW模式

可以加在tab栏点击玩家处

<!--第一次点击弹出几种类型的举报-->（个人信息违规、赛道记录异常等）<!--，最下面是其他，如果是前几种点击确定则自动提交反馈，点击其他则继续对话框，改为输入式，等待玩家反馈-->

投票制（明显符合，不符合，弃权），采取玩家等级和时间分达到一定能力，并且具有一定场数的赛道次数才可以成为仲裁投票者

然后48小时或者72小时自动结算，投票哪边人多就跟哪边裁定。

个人信息则弹出对话框，比赛则等接入赛道回放系统后，采用textdraw操作点击呼出菜单等。

**比赛记录有问题的撤销对应赛道排名的比赛记录和个人记录**。

直接降低玩家的信誉度就行





~~举报系统的话要受理系统~~
~~还要接入管理员操作系统~~
然后玩家如果已经举报该玩家则不能重复举报除非状态已打回或已结算
~~状态可以参考一些平台~~
~~待受理，受理中，....~~
~~然后超过3天没处理的自动设置为已超时状态~~
~~还要记录是哪个管理员谁操作的~~
数据库有哪些列得好好想想

**玩家状态其实可只用一个变量来存吧..**
**dm啊比赛啊镜头编辑啊什么的**

**然后easydialog有空就去适配下吧，就不需要纠结在dialog编号问题**
**方法名是可以加@的**
~~*新pawn编译器3.10.10已经通过原作者github的branch适配基础include的const问题（已经减少工作量很多了），接下来的工作是自己手修开发的所有include，让他适应const问题~~*

### 

------

## 钓鱼系统





------

## 摩天轮🎡系统



### 烟花系统（过年自动等）



之前团队系统一些命令可以试试内连接/外链接，提高效率

~~*npc断氮气问题，还是取消定时器给npc氮气造成的吧 只要玩家上车的时候加个氮气就行了应该*~~

~~linux服务器的话，也创建并分配好linux用户的权限，文件删除更新需要用sudo的那种正好，文件读取可以。~~

linux上 mysql服务器授权和允许远程连接控制好，建立用户 **本地授权用于查看 更新 插入 删除**   

**远程用户仅授权select**

准确分配权限，为安全起见。这样哪怕不幸泄露用户密码对方依旧没权限删你数据
对于pawn里需要mysql的脚本**不应该用root账号**去连接而是经过部分权限**授权后的mysql用户**才去连接..

**所有mysql语句特殊地方字段都加上``**

---

### <!--PRace个人记录系统-->

<!--赛道作者表结构优化，采用UID方式能避免换号造成作者不跟随问题-->



<!--textdraw绘制玩家个人记录-->

<!--开比赛的时候读取数据库中有没有这个用户的UID的赛道名的记录，如果**有则显示**完成时间最快的一条LIMIT 1-->

<!--**无则**显示为99'99'99-->

<!--然后当玩家结算的时候-->

<!--如果**无记录**则插入数据-->

<!--秒数记录可以参考之前正常的赛道表的-->

<!--insert into .... (`uid`,`rid`,`record`,`finish_time`) values ()-->

<!--*<!--有该条赛道记录而且记录比这个快就更新记录*-->-->

<!--<!--*update ... set .. values*-->--> 

<!--配合经验系统，如果说有更新记录的话就加一个随机数的-->

<!--并且在玩家完结比赛的时候提示战绩和经验值附加情况-->



<!--比赛生涯可查看比赛次数（通过COUNT(*)）-->

<!--还可观看最近100场比赛记录ORDER BY `finish_time` desc limit `100`-->

<!--到时候接入赛道回放系统和举报系统-->



<!--双倍经验卡？？？-->



~~*转移服务器到ecs上到时候再转回轻量应用服务器*~~
~~*（先看看学生云中止续费还能在嘛买吗 和江浙沪的服务器还能有吗）~~*

*~~asan无法支持/u判断中文，所以干脆直接支持双字节算了~~*
*~~自己在centos上编译了个版本不知道能不能用~~*
*~~最好是有空拿visualstudio自己改改顺便支持中文~~*
*~~不知道是转义问题还是怎么的反正用不了~~*
*~~match是全字匹配*~~

---

### <!--通过/c根命令实现3d速度表~~-->

用户数据库从db改到mysqlR41

**无限爱车系统（价格成倍增加）和爱车购买系统（界面textdraw式）**

***取消mselection***，自制一套textdraw用于图形车和图形人物

---

### 魅力度系统（搭配等级用）

---

### 实时obj创建及纹理系统（用鹏达之前开过服的论坛那个）**

---

### 团队贡献值和团队等级系统

---

### 在线时长奖励系统和防沉迷?

<!--TAB栏显示**个人比赛/赛车生涯**和其他什么的-->

<!--根据等级显示称号和等级，经验状态-->

<!--赛车生涯中显示比赛次数、各个赛道比赛记录等-->



<!--团队成员中显示团队成员在线状态 离线和在线-->





## 比赛结算系统

上一把没结算前不能开下一把

## 比赛房间系统

可以浏览有哪些房间进行加入..



## 小游戏

增加一些小游戏 比如踩玻璃啥的





**最最最最难的最终计划**——所有模块化的东西更加贴切并依赖用户数据库**(UID)**

比如PRace和PHouse等，邮箱认证系统等。

修改表结构，所有数据存储读取升级到MYSQLR41版本，这个难度可不是一般的大了……

